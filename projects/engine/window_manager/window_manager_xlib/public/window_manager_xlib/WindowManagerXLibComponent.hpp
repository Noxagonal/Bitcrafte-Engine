#pragma once

#include <build_configuration/BuildConfigurationComponent.hpp>

#include <core/containers/UniquePtr.hpp>

#include <window_manager/WindowManagerComponent.hpp>



namespace bc {
namespace window_manager {



class XLibManager;
class Window;
struct WindowCreateInfo;



////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
class WindowManagerXLibComponent : public WindowManagerComponent
{
	friend class Window;

public:

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	WindowManagerXLibComponent( const WindowManagerComponentCreateInfo& create_info );

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	virtual ~WindowManagerXLibComponent();

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	virtual void Run() override;

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	virtual auto CreateWindow( const WindowCreateInfo& window_create_info ) -> UniquePtr<Window> override;

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	virtual auto GetPlatformSpecificHandles() const -> const WindowManagerPlatformHandlesBase* override;

private:

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	UniquePtr<XLibManager>		xlib_manager;
};



} // window
} // bc
