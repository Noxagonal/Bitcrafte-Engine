#pragma once

#include <build_configuration/BuildConfigurationComponent.hpp>

#include <core/containers/UniquePtr.hpp>

#include <engine/EngineComponentCreateInfo.hpp>



namespace bc {

namespace window { class WindowComponent; }
namespace rhi { class RHIComponent; }

namespace engine {



////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
class BITCRAFTE_ENGINE_API EngineComponent
{
public:

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	EngineComponent(
		const EngineComponentCreateInfo							&	create_info
	);

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	~EngineComponent();

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	void															Run();

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	window::WindowComponent										*	GetWindowComponent();

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	rhi::RHIComponent											*	GetRHIComponent();

private:

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	static UniquePtr<window::WindowComponent>						CreateWindowComponent(
		const EngineComponentCreateInfo							&	create_info
	);

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	static UniquePtr<rhi::RHIComponent>								CreateRHIComponent(
		const EngineComponentCreateInfo							&	create_info
	);

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	EngineComponentCreateInfo										create_info_copy;

	UniquePtr<window::WindowComponent>								window_component;
	UniquePtr<rhi::RHIComponent>									rhi_component;
};



EngineComponent * GetEngine();



} // engine
} // bc
